---
import '../../styles/global.css';
import data from '../../data/main.json';

export function getStaticPaths() {
  return data.map(i => ({
    params: { id: i.id }
  }));
}

const { id } = Astro.params;
const item = data.find(i => i.id === id);

if (!data) {
  return new Response('Documento não encontrado', { status: 404 });
}
---

<html lang="pt-BR">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Slovo - {item.title}</title>
  </head>
  <body style= "background-color: rgb(28,19,10)" class="min-h-screen text-white flex items-center justify-center overflow-x-hidden">
    <p class="absolute flex top-3 justify-center opacity-7 max-[425px]:text-[10px]">Slovo</p>
    <div class="container mx-auto p-10 max-w-full text-center">
      <h1 class="text-5xl sm:text-md md:text-5xl lg:text-5xl font-bold mb-3 slavonic text-red-500">
        {item.name}
      </h1>
      <h3 class="text-sm md:text-md italic text-gray-100 mb-7">
        {item.translation}
      </h3>
      <div class="text-3xl sm:text-md md:text-3xl lg:text-3xl leading-relaxed break-words mb-6 lg:px-50">
        {item.text.map(i => (
          <button type="button" class="relative mx-2 inline-block cursor-pointer hover:text-red-600 transition-colors duration-200 focus:outline-none hover:after:opacity-100 hover:after:visible after:content-[attr(data-tooltip)] after:absolute after:bottom-full after:left-1/2 after:-translate-x-1/2 after:bg-gray-800 after:text-white after:text-sm after:px-2 after:py-1 after:rounded after:opacity-0 after:invisible after:transition-opacity after:duration-200 after:max-w-[200px] after:overflow-hidden after:text-ellipsis after:whitespace-nowrap after:z-10" data-tooltip=`${i.pronunciation} | ${i.translation}`" onclick={`openModal('${i.word}', '${i.translation}', '${i.pronunciation}', '${i.case}')`}>
            <span class="slavonic select-text sm:select-none">{i.word}</span>
          </button>
        ))}
      </div>
      <p class="mt-6">
        <a href="/slova/" class="text-red-500 hover:underline text-lg">
          Voltar à lista
        </a>
      </p>
    </div>

    <!-- Modal -->
    <div id="modal" style="background-color: rgba(0,0,0,0.8)" class="fixed inset-0 hidden flex items-center justify-center z-50 text-white">
      <div style="background-color: rgb(43,30,18)" class="p-6 rounded-lg max-w-md w-full mx-4">
        <h2 id="modal-word" class="text-5xl max-[425px]:text-4xl font-bold text-red-500 mb-4 slavonic text-center"></h2>
        <p class="text-lg"><strong>Pronúncia: </strong><span id="modal-pronunciation"></span></p>
        <p class="text-lg"><strong>Tradução: </strong><span id="modal-translation"></span></p>
        <p class="text-lg"><strong>Caso: </strong><span id="modal-case"></span></p>
      </div>
    </div>

    <script is:inline>
      function openModal(word, translation, pronunciation, caseText) {
        document.getElementById('modal').classList.remove('hidden');
        document.getElementById('modal-word').textContent = word;
        document.getElementById('modal-translation').textContent = translation;
        document.getElementById('modal-pronunciation').textContent = pronunciation;
        document.getElementById('modal-case').textContent = caseText;
      }

      function closeModal() {
        document.getElementById('modal').classList.add('hidden');
      }

      // Fechar o modal ao clicar fora dele
      document.getElementById('modal').addEventListener('click', (e) => {
        if (e.target === document.getElementById('modal')) {
          closeModal();
        }
      });
    </script>
  </body>
</html>
